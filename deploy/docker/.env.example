# BuildRunner Enterprise Deployment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# CORE DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Settings
POSTGRES_DB=buildrunner
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_postgres_password_here
POSTGRES_HOST_AUTH_METHOD=scram-sha-256
POSTGRES_PORT=5432

# Database Connection URL (used by application)
DATABASE_URL=postgresql://postgres:your_secure_postgres_password_here@postgres:5432/buildrunner
POSTGRES_URL=postgresql://postgres:your_secure_postgres_password_here@postgres:5432/buildrunner

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Settings for caching and sessions
REDIS_PASSWORD=your_secure_redis_password_here
REDIS_PORT=6379
REDIS_URL=redis://:your_secure_redis_password_here@redis:6379

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================

# Supabase Project Settings
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# For local development, use:
# NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
# SUPABASE_URL=http://localhost:54321

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# NextAuth Configuration
NEXTAUTH_URL=https://your-domain.com
NEXTAUTH_SECRET=your_nextauth_secret_32_chars_min
JWT_SECRET=your_jwt_secret_32_chars_minimum

# =============================================================================
# SSO CONFIGURATION (Enterprise)
# =============================================================================

# OIDC/OAuth2 Provider Settings
OIDC_CLIENT_ID=your_oidc_client_id
OIDC_CLIENT_SECRET=your_oidc_client_secret
OIDC_ISSUER=https://your-idp.com/.well-known/openid_configuration

# SAML Provider Settings
SAML_CERT=-----BEGIN CERTIFICATE-----\nYour SAML certificate here\n-----END CERTIFICATE-----
SAML_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nYour SAML private key here\n-----END PRIVATE KEY-----

# =============================================================================
# AI MODEL PROVIDERS
# =============================================================================

# OpenAI Configuration
OPENAI_API_KEY=sk-your_openai_api_key_here
OPENAI_ORG_ID=org-your_openai_org_id_here

# Anthropic Configuration
ANTHROPIC_API_KEY=sk-ant-your_anthropic_api_key_here

# Google AI Configuration (optional)
GOOGLE_AI_API_KEY=your_google_ai_api_key_here

# =============================================================================
# EMAIL/SMTP CONFIGURATION
# =============================================================================

# SMTP Settings for notifications
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=your_smtp_username
SMTP_PASSWORD=your_smtp_password
SMTP_FROM=noreply@your-domain.com
SMTP_SECURE=true

# =============================================================================
# ENTERPRISE AUDIT & COMPLIANCE
# =============================================================================

# Audit Export Configuration (S3-compatible storage)
AUDIT_EXPORT_BUCKET=your-audit-bucket
AUDIT_EXPORT_ENDPOINT=https://s3.amazonaws.com
AUDIT_EXPORT_REGION=us-east-1
AUDIT_EXPORT_ACCESS_KEY=your_s3_access_key
AUDIT_EXPORT_SECRET_KEY=your_s3_secret_key

# SIEM Integration (optional)
SIEM_WEBHOOK_URL=https://your-siem.com/webhook/buildrunner
SIEM_WEBHOOK_SECRET=your_siem_webhook_secret

# Data Residency Compliance
DATA_RESIDENCY=us  # Options: us, eu, custom

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Environment
NODE_ENV=production

# Port Configuration
WEB_PORT=3000
EDGE_FUNCTIONS_PORT=54321

# Worker Configuration
WORKER_CONCURRENCY=4
WORKER_TIMEOUT=300

# =============================================================================
# REVERSE PROXY & SSL
# =============================================================================

# Nginx Configuration
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# SSL Certificate paths (if using custom certificates)
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Prometheus Configuration
PROMETHEUS_PORT=9090

# Grafana Configuration
GRAFANA_PORT=3001
GRAFANA_PASSWORD=your_secure_grafana_password

# =============================================================================
# ENTERPRISE FEATURES
# =============================================================================

# License Configuration
ENTERPRISE_LICENSE_KEY=your_enterprise_license_key_here

# Feature Flags
ENABLE_SSO=true
ENABLE_AUDIT_EXPORT=true
ENABLE_SIEM_INTEGRATION=false
ENABLE_DATA_RESIDENCY_ENFORCEMENT=true

# Access Review Configuration
ACCESS_REVIEW_FREQUENCY=quarterly  # Options: monthly, quarterly, annually
ACCESS_REVIEW_ADMIN_EMAIL=admin@your-domain.com

# Key Rotation Configuration
KEY_ROTATION_SCHEDULE=monthly  # Options: weekly, monthly, quarterly
KEY_ROTATION_NOTIFICATION_EMAIL=security@your-domain.com

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================

# Uncomment for development mode
# NODE_ENV=development
# NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
# NEXTAUTH_URL=http://localhost:3000
# WEB_PORT=3000

# =============================================================================
# SECURITY NOTES
# =============================================================================

# 1. Never commit this file with real secrets to version control
# 2. Use strong, unique passwords for all services
# 3. Rotate secrets regularly (monthly recommended)
# 4. Use environment-specific values for each deployment
# 5. Consider using a secrets management service (AWS Secrets Manager, etc.)
# 6. Ensure all URLs use HTTPS in production
# 7. Validate all external service configurations before deployment

# =============================================================================
# QUICK START COMMANDS
# =============================================================================

# 1. Copy this file: cp .env.example .env
# 2. Fill in your values above
# 3. Start services: docker compose up -d
# 4. Check health: curl http://localhost:3000/api/health
# 5. Access application: http://localhost:3000

# For production deployment:
# 1. Set NODE_ENV=production
# 2. Configure proper SSL certificates
# 3. Set up external database and Redis if needed
# 4. Configure monitoring and alerting
# 5. Set up backup and disaster recovery
